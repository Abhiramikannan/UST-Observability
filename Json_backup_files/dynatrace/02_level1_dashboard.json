{"version":20,"variables":[{"version":2,"key":"serviceName","type":"query","visible":true,"editable":true,"input":"timeseries {\n  dummy = sum(dt.service.request.count, default: 0)\n},\nby: { dt.entity.service }\n| fieldsAdd serviceName = entityName(dt.entity.service)\n| fields serviceName\n","multiple":false}],"tiles":{"0":{"title":"Detailed view","type":"data","query":"timeseries \n  totalRequests = sum(dt.service.request.count),\n  failedRequests = sum(dt.service.request.failure_count),\n  p50ResponseTime = percentile(dt.service.request.response_time, 50),\n  p95ResponseTime = percentile(dt.service.request.response_time, 95),\n  p99ResponseTime = percentile(dt.service.request.response_time, 99)\n, by: { dt.entity.service }\n| filter entityName(dt.entity.service) == \"email\"\n\n| fieldsAdd \n    avgResponseTime_ms = arrayAvg(p50ResponseTime) / 1000,\n    totalRequests_sum = arraySum(totalRequests),\n    failedRequests_sum = arraySum(failedRequests)\n\n| fieldsAdd \n    error_pct = if(condition: totalRequests_sum > 0, then: failedRequests_sum / totalRequests_sum * 100, else: 0)\n\n| fields avgResponseTime_ms, totalRequests_sum, failedRequests_sum, error_pct\n","visualization":"table","visualizationSettings":{"autoSelectVisualization":true,"table":{"hideColumnsForLargeResults":true,"sortBy":[{"columnId":"[\"totalRequests_sum\"]","direction":"ascending"}],"columnOrder":["[\"avgResponseTime_ms\"]","[\"totalRequests_sum\"]","[\"failedRequests_sum\"]","[\"error_pct\"]"]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"2":{"title":"Error SLO Compliance Over Time hardcoded","type":"data","query":"timeseries {\n  totalRequests = sum(dt.service.request.count, default: 0),\n  failedRequests = sum(dt.service.request.failure_count, default: 0)\n},\nby: { dt.entity.service }\n| fieldsAdd readableName = entityName(dt.entity.service)\n| filter readableName == \"frontend\"\n| fieldsAdd errorSLI = if(\n    condition: arrayAvg(totalRequests) > 0,\n    then: 100 * ((arrayAvg(totalRequests) - arrayAvg(failedRequests)) / arrayAvg(totalRequests)),\n    else: 100\n)\n| fields timeframe, interval, errorSLI\n","visualization":"table","visualizationSettings":{"autoSelectVisualization":false,"table":{"hideColumnsForLargeResults":true}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"3":{"title":"Error SLI Compliance over time","type":"data","query":"timeseries {\n  totalRequests = sum(dt.service.request.count, default: 0),\n  failedRequests = sum(dt.service.request.failure_count, default: 0)\n},\nby: { dt.entity.service }\n| fieldsAdd readableName = lower(trim(entityName(dt.entity.service)))\n| filter readableName == lower(trim($serviceName)) \n| fieldsAdd errorSLI = if(\n    condition: arrayAvg(totalRequests) > 0,\n    then: 100 * ((arrayAvg(totalRequests) - arrayAvg(failedRequests)) / arrayAvg(totalRequests)),\n    else: 100\n)\n| fields timeframe, interval, errorSLI\n","visualization":"lineChart","visualizationSettings":{"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"4":{"title":"Latency SLI compliance over time","type":"data","query":"timeseries {\n  fastSamples = count(latencyFast, default: 0),\n  totalSamples = count(dt.sfm.server.metrics.latencies, default: 0)\n},\nfilter: dt.system.bucket == \"dt_system_metrics\",\nby: dt.entity.host\n| fieldsAdd readableName = lower(trim(entityName(dt.entity.host)))\n| filter readableName == lower(trim($serviceName))\n| fieldsAdd latencyFast = dt.sfm.server.metrics.latencies < 1000\n| fieldsAdd latencySLI = 100 * (arrayAvg(fastSamples) / arrayAvg(totalSamples))\n| fields timeframe, interval, latencySLI\n","visualization":"table","visualizationSettings":{"autoSelectVisualization":true,"table":{"hideColumnsForLargeResults":true}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"5":{"title":"latency","type":"data","query":"timeseries { latencies = avg(dt.sfm.server.metrics.latencies, scalar: true), latencies.trend_line = avg(dt.sfm.server.metrics.latencies) }, filter: { dt.system.bucket == \"dt_system_metrics\" }","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","recordField":"latencies","colorThresholdTarget":"background","sparklineSettings":{"variant":"area","record":"latencies.trend_line","showTicks":true},"trend":{"isVisible":true}},"autoSelectVisualization":false,"thresholds":[{"id":"0","title":"","field":"latencies","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}}},"layouts":{"0":{"x":0,"y":0,"w":10,"h":3},"2":{"x":10,"y":0,"w":13,"h":3},"3":{"x":0,"y":3,"w":10,"h":7},"4":{"x":0,"y":10,"w":23,"h":5},"5":{"x":10,"y":3,"w":13,"h":7}},"importedWithCode":false,"settings":{}}
